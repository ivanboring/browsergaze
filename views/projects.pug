extends page

block content
    div(class="header bg-primary pb-6")
        div(class="container-fluid")
            div(class="header-body")
                div(class="row align-items-center py-4")
                    div(class="col-lg-6 col-7")
                        h2(class="h1 text-white d-inline-block mb-0")=title
                    div(class="col-lg-6 col-5 text-right")
                        if isAdmin
                            a(href="/projects/create", class="btn btn-neutral btn-md", type="button")
                                span(class="btn-inner--icon")
                                    i(class="ni ni-fat-add")
                                span(class="btn-inner--text")
                                    if projects.length
                                        | Create another project
                                    else
                                        | Create first project
    div(class="container-fluid mt--6")
        if projects && projects.length
            div(class="row")
                each val, key in projects
                    div(class="col-sm-6 col-md-6 col-12 col-lg-4 col-xl-3")
                        div(class="card")
                            a(href="/projects/detail/" + val.dataname)
                                img(src='/' + val.dataname + '/init.jpg', class="card-img-top")
                            div(class="card-body text-center")
                                a(href="/projects/detail/" + val.dataname, class="avatar avatar-xs")
                                    img(src='/' + val.dataname + "/icon.png")
                                a(href="/projects/detail/" + val.dataname)
                                    h4(class="card-title text-center")=val.name
                                div(class="dropdown")
                                    button(class="btn btn-primary btn-sm dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false")
                                        | Actions
                                    div(class="dropdown-menu" aria-labelledby="dropdownMenuButton")
                                        a(href="/projects/detail/" + val.dataname, class="dropdown-item")
                                            i(class="fas fa-file")
                                            | View pages
                                        a(href="/projects/" + val.dataname + '/results', class="dropdown-item")
                                            i(class="fas fa-poll")
                                            | View regression results
                                        a(href="/projects/" + val.dataname + '/results', class="dropdown-item run-project", data-name=val.dataname)
                                            i(class="fas fa-poll")
                                            | Run all tests
                                        a(href="/projects/" + val.dataname + "/edit", class="dropdown-item")
                                            i(class="fas fa-edit")
                                            | Edit project
                                        a(href="/projects/" + val.dataname + "/browser_diffs", class="dropdown-item")
                                            i(class="fas fa-images")
                                            | Setup Browser Diffs
                                        a(href="/projects/" + val.dataname + "/delete", class="dropdown-item")
                                            i(class="fas fa-minus-circle")
                                            | Delete project
        else
            div(class="row justify-content-center")
                div(class="col-6")
                    div(class="card")
                        div(class="card-header text-center")
                            
                        div(class="card-body text-center")
                            h2
                                | Hello and welcome to glitch-hawk
                            p
                                |If you already know how this works you can go ahead and
                            a(href="/projects/create", class="btn btn-primary btn-md", type="button")
                                span(class="btn-inner--icon")
                                    i(class="ni ni-fat-add")
                                span(class="btn-inner--text")
                                    | Create your first project
    script(src="/js/pages/projects.js")
